<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0">
  <xqdoc:control>
    <xqdoc:date>2015-07-09T20:28:18.911+01:00</xqdoc:date>
    <xqdoc:version>1.1</xqdoc:version>
  </xqdoc:control>
  <xqdoc:module type="library">
    <xqdoc:uri>expkg-zone58.audio.mp3</xqdoc:uri>
    <xqdoc:name>mp3magic.xqm</xqdoc:name>
    <xqdoc:comment>
      <xqdoc:description>Extract mp3 tags using mp3agic</xqdoc:description>
      <xqdoc:see>https://github.com/mpatric/mp3agic</xqdoc:see>
      <xqdoc:author>andy bunce</xqdoc:author>
      <xqdoc:since>mar 2015</xqdoc:since>
      <xqdoc:custom tag="licence">apache 2</xqdoc:custom>
    </xqdoc:comment>
  </xqdoc:module>
  <xqdoc:namespaces>
    <xqdoc:namespace prefix="mp3agic" uri="expkg-zone58.audio.mp3"/>
    <xqdoc:namespace prefix="Mp3File" uri="java:com.mpatric.mp3agic.Mp3File"/>
    <xqdoc:namespace prefix="ID3v1Tag" uri="java:com.mpatric.mp3agic.ID3v1Tag"/>
    <xqdoc:namespace prefix="ID3v2Tag" uri="java:com.mpatric.mp3agic.ID3v2"/>
    <xqdoc:namespace prefix="ann" uri="http://www.w3.org/2012/xquery"/>
  </xqdoc:namespaces>
  <xqdoc:imports/>
  <xqdoc:variables>
    <xqdoc:variable>
      <xqdoc:name>mp3agic:v0</xqdoc:name>
      <xqdoc:type>map(*)</xqdoc:type>
    </xqdoc:variable>
    <xqdoc:variable>
      <xqdoc:name>mp3agic:v1tags</xqdoc:name>
      <xqdoc:type>map(*)</xqdoc:type>
    </xqdoc:variable>
    <xqdoc:variable>
      <xqdoc:name>mp3agic:v2tags</xqdoc:name>
      <xqdoc:type>map(*)</xqdoc:type>
    </xqdoc:variable>
    <xqdoc:variable>
      <xqdoc:name>mp3agic:dirs</xqdoc:name>
      <xqdoc:type>map(*)</xqdoc:type>
    </xqdoc:variable>
  </xqdoc:variables>
  <xqdoc:functions>
    <xqdoc:function arity="1">
      <xqdoc:comment>
        <xqdoc:description>tag details from file name trapping all errors</xqdoc:description>
      </xqdoc:comment>
      <xqdoc:name>read</xqdoc:name>
      <xqdoc:signature>declare function read($f as xs:string) as element(metadata)</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>f</xqdoc:name>
          <xqdoc:type>xs:string</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>element(metadata)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:name>tags</xqdoc:name>
      <xqdoc:signature>declare function tags($file as xs:string) as element(tag)*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>file</xqdoc:name>
          <xqdoc:type>xs:string</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">element(tag)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:name>id3v1Tag</xqdoc:name>
      <xqdoc:signature>declare function id3v1Tag($mp3 as item()*) as element(tag)*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>mp3</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">element(tag)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:name>id3v2Tag</xqdoc:name>
      <xqdoc:signature>declare function id3v2Tag($mp3 as item()*) as element(tag)*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>mp3</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">element(tag)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="4">
      <xqdoc:comment>
        <xqdoc:description>if $src has tag extractable using $fn return as element</xqdoc:description>
      </xqdoc:comment>
      <xqdoc:name>extract-tag</xqdoc:name>
      <xqdoc:annotations>
        <xqdoc:annotation name="private"/>
      </xqdoc:annotations>
      <xqdoc:signature>declare %private function extract-tag($src as item()*, $dir as xs:string, $name as xs:string, $fn as item()*) as element(tag)?</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>src</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>dir</xqdoc:name>
          <xqdoc:type>xs:string</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>name</xqdoc:name>
          <xqdoc:type>xs:string</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>fn</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="?">element(tag)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="3">
      <xqdoc:name>extract-tags</xqdoc:name>
      <xqdoc:annotations>
        <xqdoc:annotation name="private"/>
      </xqdoc:annotations>
      <xqdoc:signature>declare %private function extract-tags($map as item()*, $src as item()*, $dir as xs:string) as element()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>map</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>src</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>dir</xqdoc:name>
          <xqdoc:type>xs:string</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">element()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
  </xqdoc:functions>
</xqdoc:xqdoc>